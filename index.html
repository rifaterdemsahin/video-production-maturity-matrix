<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üé¨ Video Production Maturity Matrix</title>
  <meta name="description" content="Assess and evolve Rifat Erdem Sahin's video production process through a structured maturity framework." />
  <meta name="author" content="Rifat Erdem Sahin" />
  <link rel="canonical" href="https://rifaterdemsahin.github.io/video-production-maturity-matrix/" />
  <style>
    :root {
      --bg: #0f0f0f;
      --surface: #1a1a2e;
      --surface2: #16213e;
      --accent: #e94560;
      --accent2: #0f3460;
      --text: #e0e0e0;
      --text-muted: #888;
      --success: #4caf50;
      --warning: #ff9800;
      --info: #2196f3;
      --nav-h: 60px;
      --radius: 10px;
      --shadow: 0 4px 24px rgba(0,0,0,0.4);
      --font: 'Segoe UI', system-ui, -apple-system, sans-serif;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: var(--font);
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    /* ‚îÄ‚îÄ TOP NAV ‚îÄ‚îÄ */
    #top-nav {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0;
      height: var(--nav-h);
      background: rgba(26,26,46,0.97);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(233,69,96,0.3);
      z-index: 1000;
      align-items: center;
      padding: 0 16px;
      gap: 6px;
      flex-wrap: nowrap;
    }
    #top-nav.visible { display: flex; }
    .nav-brand {
      font-size: 0.9rem;
      font-weight: 700;
      color: var(--accent);
      white-space: nowrap;
      flex-shrink: 0;
    }
    .nav-links {
      display: flex;
      gap: 4px;
      flex-wrap: wrap;
      align-items: center;
      flex: 1;
    }
    .nav-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.72rem;
      padding: 4px 8px;
      border-radius: 6px;
      transition: all 0.2s;
      white-space: nowrap;
    }
    .nav-links a:hover { color: var(--text); background: rgba(233,69,96,0.15); }
    .nav-links a.active { color: var(--accent); background: rgba(233,69,96,0.1); }

    /* Search */
    #search-wrap {
      position: relative;
      flex-shrink: 0;
    }
    #search-input {
      background: var(--surface);
      border: 1px solid rgba(233,69,96,0.3);
      border-radius: 20px;
      color: var(--text);
      font-size: 0.8rem;
      padding: 5px 32px 5px 12px;
      width: 180px;
      outline: none;
      transition: border-color 0.2s, width 0.3s;
    }
    #search-input:focus { border-color: var(--accent); width: 240px; }
    #search-icon {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.8rem;
      pointer-events: none;
      color: var(--text-muted);
    }
    #autocomplete-list {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--surface);
      border: 1px solid rgba(233,69,96,0.3);
      border-radius: 10px;
      margin-top: 4px;
      overflow: hidden;
      display: none;
      z-index: 1100;
      box-shadow: var(--shadow);
    }
    #autocomplete-list.open { display: block; }
    .ac-item {
      padding: 8px 14px;
      cursor: pointer;
      font-size: 0.8rem;
      transition: background 0.15s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .ac-item:hover { background: rgba(233,69,96,0.15); }
    .ac-item em { color: var(--text-muted); font-style: normal; font-size: 0.7rem; }

    /* Debug button (always visible bottom-right) */
    #debug-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(233,69,96,0.15);
      border: 1px solid var(--accent);
      color: var(--accent);
      border-radius: 50px;
      padding: 8px 16px;
      font-size: 0.75rem;
      cursor: pointer;
      z-index: 2000;
      transition: all 0.2s;
      backdrop-filter: blur(6px);
    }
    #debug-btn:hover { background: var(--accent); color: white; }

    /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
    .hero {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 80px 20px 40px;
      background: radial-gradient(ellipse at 50% 0%, rgba(233,69,96,0.12) 0%, transparent 70%),
                  linear-gradient(135deg, #0f0f0f 0%, #1a1a2e 100%);
      text-align: center;
    }
    .hero-badge {
      background: rgba(233,69,96,0.15);
      border: 1px solid rgba(233,69,96,0.4);
      color: var(--accent);
      font-size: 0.75rem;
      padding: 4px 16px;
      border-radius: 20px;
      margin-bottom: 20px;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    .hero h1 {
      font-size: clamp(2rem, 6vw, 4rem);
      font-weight: 800;
      line-height: 1.2;
      margin-bottom: 20px;
      background: linear-gradient(135deg, #fff 0%, var(--accent) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .hero p {
      font-size: clamp(0.9rem, 2vw, 1.2rem);
      color: var(--text-muted);
      max-width: 620px;
      line-height: 1.7;
      margin-bottom: 40px;
    }
    .hero-actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 60px;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      border-radius: 50px;
      font-size: 0.9rem;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.25s;
      cursor: pointer;
      border: none;
    }
    .btn-primary { background: var(--accent); color: white; }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(233,69,96,0.4); }
    .btn-outline { background: transparent; border: 1px solid rgba(233,69,96,0.5); color: var(--accent); }
    .btn-outline:hover { background: rgba(233,69,96,0.1); transform: translateY(-2px); }

    /* Social icons */
    .social-row {
      display: flex;
      gap: 16px;
      align-items: center;
      justify-content: center;
      margin-bottom: 60px;
    }
    .social-link {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.85rem;
      padding: 8px 16px;
      border-radius: 50px;
      border: 1px solid rgba(255,255,255,0.1);
      transition: all 0.2s;
    }
    .social-link:hover { color: white; border-color: rgba(255,255,255,0.3); background: rgba(255,255,255,0.05); }
    .social-link svg { width: 18px; height: 18px; flex-shrink: 0; }

    /* ‚îÄ‚îÄ MATURITY SCORE CARD ‚îÄ‚îÄ */
    .score-section {
      width: 100%;
      max-width: 900px;
      margin-bottom: 60px;
    }
    .score-section h2 { font-size: 1.4rem; margin-bottom: 20px; color: var(--text); }
    .score-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }
    .score-card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 16px;
      border: 1px solid rgba(255,255,255,0.07);
      transition: transform 0.2s, border-color 0.2s;
    }
    .score-card:hover { transform: translateY(-3px); border-color: rgba(233,69,96,0.3); }
    .score-label { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 8px; }
    .score-bar-wrap { height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden; margin-bottom: 6px; }
    .score-bar { height: 100%; border-radius: 3px; transition: width 1s ease; }
    .score-value { font-size: 0.8rem; font-weight: 700; }
    .level-1 { color: #f44336; } .bar-1 { background: #f44336; }
    .level-2 { color: #ff9800; } .bar-2 { background: #ff9800; }
    .level-3 { color: #ffeb3b; } .bar-3 { background: #ffeb3b; }
    .level-4 { color: #4caf50; } .bar-4 { background: #4caf50; }
    .level-5 { color: #2196f3; } .bar-5 { background: linear-gradient(90deg, #2196f3, #9c27b0); }

    /* ‚îÄ‚îÄ JOURNEY STAGES ‚îÄ‚îÄ */
    .stages-section {
      width: 100%;
      max-width: 1100px;
      padding: 0 20px;
      margin-bottom: 80px;
    }
    .stages-section h2 { font-size: 1.4rem; margin-bottom: 30px; text-align: center; }
    .stages-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
    }
    .stage-card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 24px;
      border: 1px solid rgba(255,255,255,0.07);
      text-decoration: none;
      color: var(--text);
      transition: all 0.25s;
      display: block;
      position: relative;
      overflow: hidden;
    }
    .stage-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
      background: var(--card-color, var(--accent));
      transform: scaleX(0);
      transition: transform 0.3s;
    }
    .stage-card:hover::before { transform: scaleX(1); }
    .stage-card:hover { transform: translateY(-4px); box-shadow: var(--shadow); border-color: rgba(233,69,96,0.2); }
    .stage-num { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
    .stage-icon { font-size: 2rem; margin-bottom: 10px; }
    .stage-title { font-size: 1.05rem; font-weight: 700; margin-bottom: 6px; }
    .stage-subtitle { font-size: 0.75rem; color: var(--accent); font-weight: 600; margin-bottom: 10px; }
    .stage-desc { font-size: 0.82rem; color: var(--text-muted); line-height: 1.6; }

    /* ‚îÄ‚îÄ CAROUSEL ‚îÄ‚îÄ */
    .carousel-section {
      width: 100%;
      max-width: 900px;
      padding: 0 20px;
      margin-bottom: 80px;
    }
    .carousel-section h2 { font-size: 1.4rem; margin-bottom: 20px; text-align: center; }
    .carousel {
      position: relative;
      border-radius: var(--radius);
      overflow: hidden;
      background: var(--surface);
      border: 1px solid rgba(255,255,255,0.07);
    }
    .carousel-inner {
      display: flex;
      transition: transform 0.5s ease;
    }
    .carousel-slide {
      min-width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 60px 40px;
      background: linear-gradient(135deg, var(--surface) 0%, var(--surface2) 100%);
      font-size: 5rem;
      flex-direction: column;
      gap: 16px;
    }
    .carousel-slide-label {
      font-size: 1rem;
      color: var(--text-muted);
      text-align: center;
    }
    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(233,69,96,0.8);
      border: none;
      color: white;
      width: 40px; height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      transition: background 0.2s;
    }
    .carousel-btn:hover { background: var(--accent); }
    .carousel-btn.prev { left: 12px; }
    .carousel-btn.next { right: 12px; }
    .carousel-dots {
      display: flex;
      justify-content: center;
      gap: 8px;
      padding: 14px;
      background: var(--surface);
    }
    .carousel-dot {
      width: 8px; height: 8px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      cursor: pointer;
      transition: background 0.2s;
    }
    .carousel-dot.active { background: var(--accent); }

    /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
    footer {
      text-align: center;
      padding: 40px 20px;
      border-top: 1px solid rgba(255,255,255,0.07);
      color: var(--text-muted);
      font-size: 0.8rem;
    }
    footer a { color: var(--accent); text-decoration: none; }

    /* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
    @media (max-width: 640px) {
      .hero { padding: 60px 16px 30px; }
      .stages-grid { grid-template-columns: 1fr; }
      #search-input { width: 140px; }
      #search-input:focus { width: 160px; }
      .nav-brand { display: none; }
      .social-row { flex-direction: column; gap: 10px; }
    }
  </style>
</head>
<body>

<!-- TOP NAV (debug mode) -->
<nav id="top-nav">
  <div class="nav-brand">üé¨ VPMM</div>
  <div class="nav-links">
    <a href="./1_Real_Unknown/" data-path="1_Real_Unknown">1_Real</a>
    <a href="./2_Environment/" data-path="2_Environment">2_Environment</a>
    <a href="./3_Simulation/" data-path="3_Simulation">3_Simulation</a>
    <a href="./4_Formula/" data-path="4_Formula">4_Formula</a>
    <a href="./5_Symbols/" data-path="5_Symbols">5_Symbols</a>
    <a href="./6_Semblance/" data-path="6_Semblance">6_Semblance</a>
    <a href="./7_Testing_Known/" data-path="7_Testing">7_Testing</a>
  </div>
  <div id="search-wrap">
    <input id="search-input" type="text" placeholder="Search..." autocomplete="off" />
    <span id="search-icon">üîç</span>
    <div id="autocomplete-list"></div>
  </div>
</nav>

<!-- DEBUG TOGGLE BUTTON -->
<button id="debug-btn" onclick="toggleDebug()" title="Toggle Navigation Menu">‚öôÔ∏è Debug</button>

<!-- HERO -->
<section class="hero">
  <div class="hero-badge">üé¨ Self-Learning System</div>
  <h1>Video Production<br>Maturity Matrix</h1>
  <p>A structured framework to assess, track, and evolve Rifat Erdem Sahin's video production process ‚Äî from ad-hoc chaos to an optimized, data-driven creative machine.</p>

  <div class="hero-actions">
    <a href="#stages" class="btn btn-primary">üó∫Ô∏è Explore Journey</a>
    <a href="markdown_renderer.html" class="btn btn-outline">üìù View Docs</a>
  </div>

  <div class="social-row">
    <a href="https://github.com/rifaterdemsahin/video-production-maturity-matrix" class="social-link" target="_blank" rel="noopener">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/></svg>
      GitHub
    </a>
    <a href="https://www.linkedin.com/in/rifaterdemsahin/" class="social-link" target="_blank" rel="noopener">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
      LinkedIn üîó
    </a>
    <a href="https://www.youtube.com/@RifatErdemSahin" class="social-link" target="_blank" rel="noopener">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"/></svg>
      YouTube üì∫
    </a>
  </div>

  <!-- MATURITY SCORE OVERVIEW -->
  <div class="score-section">
    <h2>üìä Current Maturity Scores</h2>
    <div class="score-grid" id="score-grid">
      <!-- Populated by JS -->
    </div>
  </div>
</section>

<!-- STAGES -->
<section class="stages-section" id="stages">
  <h2>üó∫Ô∏è The 7-Stage Journey: Unknown ‚Üí Proven</h2>
  <div class="stages-grid">
    <a class="stage-card" href="./1_Real_Unknown/" style="--card-color:#e94560">
      <div class="stage-num">Stage 1</div>
      <div class="stage-icon">‚ùì</div>
      <div class="stage-title">1_Real_Unknown</div>
      <div class="stage-subtitle">The "Why"</div>
      <div class="stage-desc">Problem definitions, OKRs, and the core questions driving this maturity assessment.</div>
    </a>
    <a class="stage-card" href="./2_Environment/" style="--card-color:#ff9800">
      <div class="stage-num">Stage 2</div>
      <div class="stage-icon">üåç</div>
      <div class="stage-title">2_Environment</div>
      <div class="stage-subtitle">The "Context"</div>
      <div class="stage-desc">Roadmaps, constraints, and setup guides including Ollama & Qdrant AI stack.</div>
    </a>
    <a class="stage-card" href="./3_Simulation/" style="--card-color:#ffeb3b">
      <div class="stage-num">Stage 3</div>
      <div class="stage-icon">üé®</div>
      <div class="stage-title">3_Simulation</div>
      <div class="stage-subtitle">The "Vision"</div>
      <div class="stage-desc">UI mockups, wireframes, and a dynamic image carousel of the desired end-state.</div>
    </a>
    <a class="stage-card" href="./4_Formula/" style="--card-color:#4caf50">
      <div class="stage-num">Stage 4</div>
      <div class="stage-icon">üìê</div>
      <div class="stage-title">4_Formula</div>
      <div class="stage-subtitle">The "Recipe"</div>
      <div class="stage-desc">Step-by-step guides, research notes, and the logic behind each improvement.</div>
    </a>
    <a class="stage-card" href="./5_Symbols/" style="--card-color:#2196f3">
      <div class="stage-num">Stage 5</div>
      <div class="stage-icon">üíª</div>
      <div class="stage-title">5_Symbols</div>
      <div class="stage-subtitle">The "Reality"</div>
      <div class="stage-desc">Core source code, scripts, and implementations with PrismJS syntax highlighting.</div>
    </a>
    <a class="stage-card" href="./6_Semblance/" style="--card-color:#9c27b0">
      <div class="stage-num">Stage 6</div>
      <div class="stage-icon">üêõ</div>
      <div class="stage-title">6_Semblance</div>
      <div class="stage-subtitle">The "Scars"</div>
      <div class="stage-desc">Error logs, near-misses, workarounds, and the gap between plan and reality.</div>
    </a>
    <a class="stage-card" href="./7_Testing_Known/" style="--card-color:#00bcd4">
      <div class="stage-num">Stage 7</div>
      <div class="stage-icon">‚úÖ</div>
      <div class="stage-title">7_Testing_Known</div>
      <div class="stage-subtitle">The "Proof"</div>
      <div class="stage-desc">Validation against Stage 1 objectives, testing checklists, and outcome confirmation.</div>
    </a>
  </div>
</section>

<!-- CAROUSEL (3_Simulation preview) -->
<div class="carousel-section">
  <h2>üé® Vision Carousel</h2>
  <div class="carousel" id="carousel">
    <div class="carousel-inner" id="carousel-inner">
      <div class="carousel-slide">
        üé¨
        <div class="carousel-slide-label">Level 1 ‚Üí Level 5: The full journey of video mastery</div>
      </div>
      <div class="carousel-slide">
        üìä
        <div class="carousel-slide-label">Maturity dimensions mapped across 10 video production axes</div>
      </div>
      <div class="carousel-slide">
        üöÄ
        <div class="carousel-slide-label">Data-driven feedback loops for continuous improvement</div>
      </div>
      <div class="carousel-slide">
        üé®
        <div class="carousel-slide-label">Thumbnail & SEO optimization at scale</div>
      </div>
      <div class="carousel-slide">
        ü§ñ
        <div class="carousel-slide-label">AI-assisted editing and semantic search across all content</div>
      </div>
    </div>
    <button class="carousel-btn prev" onclick="carouselMove(-1)">‚Äπ</button>
    <button class="carousel-btn next" onclick="carouselMove(1)">‚Ä∫</button>
  </div>
  <div class="carousel-dots" id="carousel-dots"></div>
</div>

<footer>
  <p>üé¨ Video Production Maturity Matrix &nbsp;|&nbsp;
    <a href="https://github.com/rifaterdemsahin/video-production-maturity-matrix" target="_blank">GitHub</a> &nbsp;¬∑&nbsp;
    <a href="https://www.linkedin.com/in/rifaterdemsahin/" target="_blank">LinkedIn</a> &nbsp;¬∑&nbsp;
    <a href="https://www.youtube.com/@RifatErdemSahin" target="_blank">YouTube</a>
  </p>
  <p style="margin-top:8px;">Built with ‚ú® by Rifat Erdem Sahin &nbsp;|&nbsp; Unknown ‚Üí Proven</p>
</footer>

<script>
// ‚îÄ‚îÄ MATURITY DATA ‚îÄ‚îÄ
const maturityData = [
  { label: "Pre-Production Planning", level: 2, score: 2.1 },
  { label: "Scripting & Storytelling", level: 2, score: 2.4 },
  { label: "Recording & Equipment", level: 3, score: 3.0 },
  { label: "Editing & Post-Production", level: 2, score: 2.5 },
  { label: "Thumbnail & SEO", level: 2, score: 1.8 },
  { label: "Publishing & Distribution", level: 3, score: 2.8 },
  { label: "Analytics & Feedback", level: 1, score: 1.5 },
  { label: "Community & Engagement", level: 2, score: 2.0 },
  { label: "Monetization", level: 1, score: 1.2 },
  { label: "Learning & Development", level: 3, score: 2.9 },
];

const levelNames = { 1: "Ad-Hoc", 2: "Developing", 3: "Defined", 4: "Managed", 5: "Optimized" };

function buildScoreGrid() {
  const grid = document.getElementById('score-grid');
  grid.innerHTML = maturityData.map(d => `
    <div class="score-card">
      <div class="score-label">${d.label}</div>
      <div class="score-bar-wrap">
        <div class="score-bar bar-${d.level}" style="width:${(d.score/5)*100}%"></div>
      </div>
      <div class="score-value level-${d.level}">${d.score}/5 ‚Äî ${levelNames[d.level]}</div>
    </div>
  `).join('');
}

// ‚îÄ‚îÄ DEBUG / NAV TOGGLE ‚îÄ‚îÄ
function getDebugState() {
  return document.cookie.split(';').some(c => c.trim().startsWith('debug=true'));
}
function setDebugCookie(val) {
  document.cookie = `debug=${val};path=/;max-age=${60*60*24*30}`;
}
function applyDebugState() {
  const nav = document.getElementById('top-nav');
  const btn = document.getElementById('debug-btn');
  if (getDebugState()) {
    nav.classList.add('visible');
    document.body.style.paddingTop = '60px';
    btn.textContent = '‚öôÔ∏è Hide Nav';
  } else {
    nav.classList.remove('visible');
    document.body.style.paddingTop = '0';
    btn.textContent = '‚öôÔ∏è Debug';
  }
}
function toggleDebug() {
  setDebugCookie(!getDebugState());
  applyDebugState();
}

// Also support ?debug=true URL param (sets cookie)
(function() {
  const params = new URLSearchParams(window.location.search);
  if (params.get('debug') === 'true') { setDebugCookie(true); }
  if (params.get('debug') === 'false') { setDebugCookie(false); }
})();

// ‚îÄ‚îÄ SEARCH AUTOCOMPLETE ‚îÄ‚îÄ
const searchData = [
  { label: "‚ùì Real Unknown ‚Äî Problem Definition", path: "1_Real_Unknown/README.md" },
  { label: "‚ùì Real Unknown ‚Äî OKRs", path: "1_Real_Unknown/okrs.md" },
  { label: "üåç Environment ‚Äî Roadmap", path: "2_Environment/README.md" },
  { label: "üåç Environment ‚Äî Ollama Setup", path: "2_Environment/ollama-setup.md" },
  { label: "üåç Environment ‚Äî Qdrant Setup", path: "2_Environment/qdrant-setup.md" },
  { label: "üé® Simulation ‚Äî Vision Mockups", path: "3_Simulation/README.md" },
  { label: "üìê Formula ‚Äî Step-by-Step Guide", path: "4_Formula/README.md" },
  { label: "üìê Formula ‚Äî Research Notes", path: "4_Formula/research-notes.md" },
  { label: "üíª Symbols ‚Äî Source Code", path: "5_Symbols/README.md" },
  { label: "üêõ Semblance ‚Äî Error Log", path: "6_Semblance/README.md" },
  { label: "‚úÖ Testing ‚Äî Validation Checklist", path: "7_Testing_Known/README.md" },
  { label: "üìä Maturity Score ‚Äî Pre-Production", path: "1_Real_Unknown/maturity-assessment.md" },
  { label: "üìä Maturity Score ‚Äî Editing", path: "4_Formula/editing-formula.md" },
  { label: "üé¨ Thumbnail & SEO", path: "4_Formula/thumbnail-seo.md" },
  { label: "ü§ñ AI Stack ‚Äî Qdrant + Ollama", path: "2_Environment/ai-stack.md" },
];

function filterSearch(q) {
  if (!q) return [];
  return searchData.filter(d => d.label.toLowerCase().includes(q.toLowerCase())).slice(0, 6);
}

const input = document.getElementById('search-input');
const acList = document.getElementById('autocomplete-list');

input.addEventListener('input', function() {
  const results = filterSearch(this.value.trim());
  if (!results.length || !this.value.trim()) { acList.classList.remove('open'); return; }
  acList.innerHTML = results.map(r => `
    <div class="ac-item" onclick="goToDoc('${r.path}')">
      ${r.label} <em>‚Üí ${r.path.split('/')[0]}</em>
    </div>
  `).join('');
  acList.classList.add('open');
});

document.addEventListener('click', function(e) {
  if (!e.target.closest('#search-wrap')) acList.classList.remove('open');
});

input.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') acList.classList.remove('open');
  if (e.key === 'Enter') {
    const results = filterSearch(this.value.trim());
    if (results.length) goToDoc(results[0].path);
  }
});

function goToDoc(path) {
  window.location.href = `markdown_renderer.html?file=${encodeURIComponent(path)}`;
}

// ‚îÄ‚îÄ CAROUSEL ‚îÄ‚îÄ
let carouselIdx = 0;
function buildDots() {
  const slides = document.querySelectorAll('.carousel-slide');
  const dots = document.getElementById('carousel-dots');
  dots.innerHTML = Array.from(slides).map((_, i) =>
    `<div class="carousel-dot${i===0?' active':''}" onclick="goToSlide(${i})"></div>`
  ).join('');
}
function updateCarousel() {
  const inner = document.getElementById('carousel-inner');
  const slides = document.querySelectorAll('.carousel-slide');
  inner.style.transform = `translateX(-${carouselIdx * 100}%)`;
  document.querySelectorAll('.carousel-dot').forEach((d, i) => {
    d.classList.toggle('active', i === carouselIdx);
  });
}
function carouselMove(dir) {
  const count = document.querySelectorAll('.carousel-slide').length;
  carouselIdx = (carouselIdx + dir + count) % count;
  updateCarousel();
}
function goToSlide(i) { carouselIdx = i; updateCarousel(); }

// Auto-advance carousel
setInterval(() => carouselMove(1), 4000);

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
buildScoreGrid();
buildDots();
applyDebugState();

// Highlight active nav link
document.querySelectorAll('.nav-links a').forEach(a => {
  if (window.location.pathname.includes(a.dataset.path)) a.classList.add('active');
});
</script>
</body>
</html>
